!function(){var t={4558:function(t,e,n){"use strict";n.r(e),n.d(e,{ConceptSGMEvents:function(){return i},ConceptSGMTheme:function(){return o},ConceptSGMSettings:function(){return s},ConceptSGMStrings:function(){return c},ConceptSGMLibs:function(){return a}});var r=n(8971);n(9280);window.ConceptSGMEvents=window.ConceptSGMEvents||new r.Z,window._ThemeEvent=window.ConceptSGMEvents,window.ConceptSGMLibs.loadjs=__loadjs;const i=window.ConceptSGMEvents,o=window.ConceptSGMTheme||{},s=window.ConceptSGMSettings||{},c=window.ConceptSGMStrings||{},a=window.ConceptSGMLibs||{};window.StickyATCError=class{constructor(t){this.node=t,this.timer=null,this.node&&(this.msgEl=this.node.querySelector(".sticky-atc-error__msg"),this.msgEl||(this.msgEl=document.createElement("span"),this.msgEl.className="sticky-atc-error__msg",this.node.append(this.msgEl)))}removeDiacritics(t){return t&&t.normalize("NFD").replace(/\p{Diacritic}/gu,"")}show(t){this.node&&(clearTimeout(this.timer),t||(t=window.ConceptSGMStrings.cartError||"Error"),t=this.removeDiacritics(t),this.msgEl.textContent=t,this.node.classList.remove("show"),this.node.offsetWidth,this.node.classList.add("show"),this.timer=setTimeout(()=>this.hide(),4e3))}hide(){this.node&&(this.node.classList.remove("show"),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.msgEl.textContent=""},300))}}},9280:function(){__loadjs=function(){var t=function(){},e={},n={},r={};function i(t,e){if(t){var i=r[t];if(n[t]=e,i)for(;i.length;)i[0](t,e),i.splice(0,1)}}function o(e,n){e.call&&(e={success:e}),n.length?(e.error||t)(n):(e.success||t)(e)}function s(e,n,r,i){var o,c,a=document,l=r.async,d=(r.numRetries||0)+1,u=r.before||t,h=e.replace(/[\?|#].*$/,""),f=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(h)?((c=a.createElement("link")).rel="stylesheet",c.href=f,(o="hideFocus"in c)&&c.relList&&(o=0,c.rel="preload",c.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(c=a.createElement("img")).src=f:((c=a.createElement("script")).src=e,c.async=void 0===l||l),!(c.onload=c.onerror=c.onbeforeload=function(t){var a=t.type[0];if(o)try{c.sheet.cssText.length||(a="e")}catch(t){18!=t.code&&(a="e")}if("e"==a){if((i+=1)<d)return s(e,n,r,i)}else if("preload"==c.rel&&"style"==c.as)return c.rel="stylesheet";n(e,a,t.defaultPrevented)})!==u(e,c)&&a.head.appendChild(c)}function c(t,n,r){var c,a;if(n&&n.trim&&(c=n),a=(c?r:n)||{},c){if(c in e)throw"LoadJS";e[c]=!0}function l(e,n){!function(t,e,n){var r,i,o=(t=t.push?t:[t]).length,c=o,a=[];for(r=function(t,n,r){if("e"==n&&a.push(t),"b"==n){if(!r)return;a.push(t)}--o||e(a)},i=0;i<c;i++)s(t[i],r,n)}(t,function(t){o(a,t),e&&o({success:e,error:n},t),i(c,t)},a)}if(a.returnPromise)return new Promise(l);l()}return c.ready=function(t,e){return function(t,e){t=t.push?t:[t];var i,o,s,c=[],a=t.length,l=a;for(i=function(t,n){n.length&&c.push(t),--l||e(c)};a--;)o=t[a],(s=n[o])?i(o,s):(r[o]=r[o]||[]).push(i)}(t,function(t){o(e,t)}),c},c.done=function(t){i(t,[])},c.reset=function(){e={},n={},r={}},c.isDefined=function(t){return t in e},c}()},6295:function(t,e,n){"use strict";n.r(e);n(2422);e.default=new class{constructor(){return this.component=this.component.bind(this),this.component}component(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if("function"==typeof t)return t({...e,children:r});r&&(r=r.filter(t=>null!==t)),e&&(e.class&&(e.className=e.class),delete e.children);let o="fragment"!==t?function(t,e){e=e||{};let n=document.createElement(t);try{n=Object.assign(n,e)}catch{const t=Object.keys(e);for(let r=0;r<t.length;r++)"dataSet"!==e[r]&&n.setAttribute(t[r],e[t[r]])}return n}(t,e):document.createDocumentFragment();if(-1!==["svg","path","rect","text","circle","g"].indexOf(t)){o=document.createElementNS("http://www.w3.org/2000/svg",t);for(const t in e){const n="className"===t?"class":t;o.setAttribute(n,e[t])}}for(const t of r)Array.isArray(t)?o.append(...t):o.append(t);if(e?.dataSet)for(const t in e.dataSet)Object.prototype.hasOwnProperty.call(e.dataSet,t)&&(o.dataset[t]=e.dataSet[t]);return e&&!window.__aleartedJSXData&&Object.keys(e).find(t=>t.match(/^data-/))&&(console.trace(`Your "${t}" component uses a data-* attribute! Use dataSet instead!!`),alert("Do not use data-* in your JSX component! Use dataSet instead!! - Check the console.trace for more info"),window.__aleartedJSXData=!0),e?.ref&&("function"==typeof e.ref?e.ref(o):e.ref=o),e?.on&&Object.entries(e.on).forEach(t=>{let[e,n]=t;o.addEventListener(e,n)}),e?.style&&Object.entries(e.style).forEach(t=>{let[e,n]=t;o.style.setProperty(e,n)}),o}}},8971:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});class r{constructor(){this.events={}}get evts(){return Object.keys(this.events)}subscribe(t,e){return this.events[t]=this.events[t]||[],this.events[t].push(e),()=>this.unSubscribe(t,e)}unSubscribe(t,e){const n=this.events[t];if(n&&Array.isArray(n))for(let t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1);break}}emit(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console.groupCollapsed(`Event emitted: ${t}`),console.trace(),console.groupEnd(),(this.events[t]||[]).forEach(t=>{t(...n)})}}},2422:function(){!function(){function t(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach(function(t){var n=t instanceof Node;e.appendChild(n?t:document.createTextNode(String(t)))}),this.appendChild(e)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:t})})}()},643:function(t){var e="complete",n="canceled";function r(t,e,n){Math.max(0,e),Math.max(0,n),t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function i(t){var n=t._scrollSettings;if(n){var o=n.maxSynchronousAlignments,s=function(t,e){var n,r,i,o,s,c,a,l=t.align,d=t.target.getBoundingClientRect(),u=l&&null!=l.left?l.left:.5,h=l&&null!=l.top?l.top:.5,f=l&&null!=l.leftOffset?l.leftOffset:0,p=l&&null!=l.topOffset?l.topOffset:0,m=u,g=h;if(t.isWindow(e))c=Math.min(d.width,e.innerWidth),a=Math.min(d.height,e.innerHeight),r=d.left+e.pageXOffset-e.innerWidth*m+c*m,i=d.top+e.pageYOffset-e.innerHeight*g+a*g,r-=f,i-=p,r=t.align.lockX?e.pageXOffset:r,i=t.align.lockY?e.pageYOffset:i,o=r-e.pageXOffset,s=i-e.pageYOffset;else{c=d.width,a=d.height,n=e.getBoundingClientRect();var y=d.left-(n.left-e.scrollLeft),w=d.top-(n.top-e.scrollTop);r=y+c*m-e.clientWidth*m,i=w+a*g-e.clientHeight*g,r-=f,i-=p,r=Math.max(Math.min(r,e.scrollWidth-e.clientWidth),0),i=Math.max(Math.min(i,e.scrollHeight-e.clientHeight),0),r=t.align.lockX?e.scrollLeft:r,i=t.align.lockY?e.scrollTop:i,o=r-e.scrollLeft,s=i-e.scrollTop}return{x:r,y:i,differenceX:o,differenceY:s}}(n,t),c=Date.now()-n.startTime,a=Math.min(1/n.time*c,1);if(n.endIterations>=o)return r(t,s.x,s.y),t._scrollSettings=null,n.end(e);var l=1-n.ease(a);if(r(t,s.x-s.differenceX*l,s.y-s.differenceY*l),c>=n.time)return n.endIterations++,n.scrollAncestor&&i(n.scrollAncestor),void i(t);!function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(i.bind(null,t))}}function o(t){return t.self===t}function s(t){return"pageXOffset"in t||(t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth)&&"hidden"!==getComputedStyle(t).overflow}function c(){return!0}function a(t){if(t.assignedSlot)return a(t.assignedSlot);if(t.parentElement)return"BODY"===t.parentElement.tagName?t.parentElement.ownerDocument.defaultView||t.parentElement.ownerDocument.ownerWindow:t.parentElement;if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e.host}}t.exports=function(t,r,l){if(t){"function"==typeof r&&(l=r,r=null),r||(r={}),r.time=isNaN(r.time)?1e3:r.time,r.ease=r.ease||function(t){return 1-Math.pow(1-t,t/2)},r.align=r.align||{};var d=a(t),u=1,h=r.validTarget||c,f=r.isScrollable;r.debug&&(console.log("About to scroll to",t),d||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var p=[];d;)if(r.debug&&console.log("Scrolling parent node",d),h(d,u)&&(f?f(d,s):s(d))&&(u++,p.push(d)),!(d=a(d))){m(e);break}return p.reduce((e,s,c)=>function(t,e,r,s,c){var a,l=!e._scrollSettings,d=e._scrollSettings,u=Date.now(),h={passive:!0};function f(t){e._scrollSettings=null,e.parentElement&&e.parentElement._scrollSettings&&e.parentElement._scrollSettings.end(t),r.debug&&console.log("Scrolling ended with type",t,"for",e),c(t),a&&(e.removeEventListener("touchstart",a,h),e.removeEventListener("wheel",a,h))}d&&d.end(n);var p=r.maxSynchronousAlignments;return null==p&&(p=3),e._scrollSettings={startTime:u,endIterations:0,target:t,time:r.time,ease:r.ease,align:r.align,isWindow:r.isWindow||o,maxSynchronousAlignments:p,end:f,scrollAncestor:s},"cancellable"in r&&!r.cancellable||(a=f.bind(null,n),e.addEventListener("touchstart",a,h),e.addEventListener("wheel",a,h)),l&&i(e),a}(t,s,r,p[c+1],m),null)}function m(t){--u||l&&l(t)}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){"use strict";var t=n(643),e=n.n(t);const{themeScriptURLs:r,themeStyleURLs:i}=window;r&&i||console.warn("Missing Assest URLs source");n(4558).ConceptSGMSettings,n(6295).default;window.__getSectionInstanceByType=t=>window.Shopify.theme.sections.instances.find(e=>e.type===t);const o=document.querySelector("#scroll-to-top-target");function s(t){e()(o,t)}var c=n(4558).ConceptSGMSettings;customElements.get("sticky-atc")||customElements.define("sticky-atc",class extends HTMLElement{constructor(){var t,e,n;super(),n=()=>{this.observer.observe(this.productFormActions),this.observeTarget=this.productFormActions},(e="setObserveTarget")in(t=this)?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,this.selectors={prodTitle:".psa__title",mainImage:".spc__main-img",atc:".add-to-cart",buyNowBtn:".prod__dynamic_checkout"},document.body.classList.add("sticky-atc-bar-enabled"),this.hasCustomFields=!!document.querySelector(".sf-prod-template__desktop .product__custom-field")}connectedCallback(){this.productFormActions=document.querySelector(".add-to-cart"),this.container=this.closest(".prod__sticky-atc"),this.errorWrapper=this.container?.previousElementSibling,this.errorWrapper&&this.errorWrapper.classList.contains("sticky-atc-error")||(this.errorWrapper=this.container?.querySelector(".sticky-atc-error")),window.StickyATCError&&this.errorWrapper&&(this.stickyError=new window.StickyATCError(this.errorWrapper)),this.form=this.querySelector("form"),this.init()}init(){this.mainProduct=document.querySelector(".main-product.product-form"),this.mainATCButton=this.mainProduct?.querySelector(".add-to-cart"),this.mainProductDynamic=this.mainProduct?.querySelector(this.selectors.buyNowBtn);const t=document.querySelector(".prod__sticky-atc");this.stickyATCBar=t,this.domNodes=queryDomNodes(this.selectors,t);const{prodTitle:e,mainImage:n,atc:r,buyNowBtn:i}=this.domNodes;i&&(this.enable_dynamic_checkout=!0),this.productId=this.dataset.productId;const o=window.matchMedia("(max-width: 639px)");o.addEventListener("change",this.checkDevice.bind(this)),this.checkDevice(o);const a=`-${c.headerHeight||66}px 0px 0px 0px`;this.observer=new IntersectionObserver(t=>{t.forEach(t=>{const e=1!==t.intersectionRatio?"remove":"add";this.container.classList[e]("translate-y-full"),document.documentElement.classList[1!=t.intersectionRatio?"remove":"add"]("stick-atc-show"),1===t.intersectionRatio&&this.stickyError?.hide()})},{threshold:1,rootMargin:a}),e?.addEventListener("click",s),n?.addEventListener("click",s),this.hasCustomFields&&(r.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.stickyError?.show(window.ConceptSGMStrings.requiredField),s(()=>this.mainATCButton.click())}),i&&i.addEventListener("click",t=>{validateForm(this.mainProduct).length>0&&(t.preventDefault(),t.stopPropagation(),this.stickyError?.show(window.ConceptSGMStrings.requiredField),s(()=>this.mainProductDynamic?.click()))},!0)),this.setObserveTarget(),this.syncWithMainProductForm(),this.form&&this.stickyError&&this.form.addEventListener("submit",this.handleSubmit.bind(this),!0)}checkDevice(t){const e=this.clientHeight+"px";document.documentElement.style.setProperty("--f-sticky-atc-bar-height",e)}async handleSubmit(t){t.preventDefault(),t.stopPropagation();const e=validateForm(this.mainProduct||this.form);if(e&&e.length>0)return void this.stickyError?.show(window.ConceptSGMStrings.requiredField);const n=new FormData(this.form),r=parseInt(n.get("id"),10),i=parseInt(n.get("quantity"))||1,o=this.form.querySelector('[name="quantity"]'),s=parseInt(o?.max)||1/0;let c=!1,a=0;try{const t=await fetch("/cart.js").then(t=>t.json());a=t.items?.find(t=>t.variant_id===r)?.quantity||0}catch(t){a=0}const l=Math.max(s-a,0);if(l<=0)return void this.stickyError?.show(window.ConceptSGMStrings.cartLimit||"Cantitatea maxima pentru acest produs este deja in cos.");i>=l&&(i>l&&n.set("quantity",l),o&&(c=!0));const d={method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:n},{ConceptSGMSettings:u}=window;u.use_ajax_atc?fetch(`${u.routes.cart_add_url}`,d).then(async t=>{let e;try{const n=t.headers.get("content-type");if(n&&n.includes("application/json"))e=await t.json();else{e={message:await t.text()}}}catch(t){e={}}return{statusCode:t.status,statusText:t.statusText,body:e}}).then(({statusCode:t,statusText:e,body:n})=>{if(t>=400||n.status){let r=n.description||n.message||e;r&&"string"==typeof r&&/<\/?html/i.test(r)&&(r=window.ConceptSGMStrings.cartError||"Error");const i=n.errors;if(!r&&i)if("string"==typeof i)r=i;else if(Array.isArray(i))r=i[0];else if("object"==typeof i){const t=Object.keys(i)[0];r=Array.isArray(i[t])?i[t][0]:i[t]}429===t&&(r="Ati trimis prea multe cereri. Va rugam sa incercati din nou mai tarziu."),this.stickyError?.show(r)}else window.ConceptSGMEvents.emit("ON_ITEM_ADDED",n),window.Shopify.onItemAdded(n),c&&o&&"function"==typeof applyCappedQtyState&&applyCappedQtyState(o)}).catch(t=>{let e=t&&t.message||"";e&&!/<\/?html/i.test(e)||(e=window.ConceptSGMStrings.cartError||"Error"),this.stickyError?.show(e)}):this.form.submit()}syncWithMainProductForm(){const t=this.querySelector('[name="id"]');window.ConceptSGMEvents.subscribe(`${this.productId}__VARIANT_CHANGE`,async e=>{t.value=e.id})}})}()}();